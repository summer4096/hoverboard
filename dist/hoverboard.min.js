!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Hoverboard=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(b,c){!function(){function b(a,b){function c(b){var c,d=a.arcs[0>b?~b:b],e=d[0];return a.transform?(c=[0,0],d.forEach(function(a){c[0]+=a[0],c[1]+=a[1]})):c=d[d.length-1],0>b?[c,e]:[e,c]}function d(a,b){for(var c in a){var d=a[c];delete b[d.start],delete d.start,delete d.end,d.forEach(function(a){e[0>a?~a:a]=1}),h.push(d)}}var e={},f={},g={},h=[],i=-1;return b.forEach(function(c,d){var e,f=a.arcs[0>c?~c:c];f.length<3&&!f[1][0]&&!f[1][1]&&(e=b[++i],b[i]=c,b[d]=e)}),b.forEach(function(a){var b,d,e=c(a),h=e[0],i=e[1];if(b=g[h])if(delete g[b.end],b.push(a),b.end=i,d=f[i]){delete f[d.start];var j=d===b?b:b.concat(d);f[j.start=b.start]=g[j.end=d.end]=j}else f[b.start]=g[b.end]=b;else if(b=f[i])if(delete f[b.start],b.unshift(a),b.start=h,d=g[h]){delete g[d.end];var k=d===b?b:d.concat(b);f[k.start=d.start]=g[k.end=b.end]=k}else f[b.start]=g[b.end]=b;else b=[a],f[b.start=h]=g[b.end=i]=b}),d(g,f),d(f,g),b.forEach(function(a){e[0>a?~a:a]||h.push([a])}),h}function d(a,c,d){function e(a){var b=0>a?~a:a;(k[b]||(k[b]=[])).push({i:a,g:j})}function f(a){a.forEach(e)}function g(a){a.forEach(f)}function h(a){"GeometryCollection"===a.type?a.geometries.forEach(h):a.type in l&&(j=a,l[a.type](a.arcs))}var i=[];if(arguments.length>1){var j,k=[],l={LineString:f,MultiLineString:g,Polygon:g,MultiPolygon:function(a){a.forEach(g)}};h(c),k.forEach(arguments.length<3?function(a){i.push(a[0].i)}:function(a){d(a[0].g,a[a.length-1].g)&&i.push(a[0].i)})}else for(var m=0,n=a.arcs.length;n>m;++m)i.push(m);return{type:"MultiLineString",arcs:b(a,i)}}function e(a,c){function d(a){a.forEach(function(b){b.forEach(function(b){(f[b=0>b?~b:b]||(f[b]=[])).push(a)})}),g.push(a)}function e(b){return m(h(a,{type:"Polygon",arcs:[b]}).coordinates[0])>0}var f={},g=[],i=[];return c.forEach(function(a){"Polygon"===a.type?d(a.arcs):"MultiPolygon"===a.type&&a.arcs.forEach(d)}),g.forEach(function(a){if(!a._){var b=[],c=[a];for(a._=1,i.push(b);a=c.pop();)b.push(a),a.forEach(function(a){a.forEach(function(a){f[0>a?~a:a].forEach(function(a){a._||(a._=1,c.push(a))})})})}}),g.forEach(function(a){delete a._}),{type:"MultiPolygon",arcs:i.map(function(c){var d=[];if(c.forEach(function(a){a.forEach(function(a){a.forEach(function(a){f[0>a?~a:a].length<2&&d.push(a)})})}),d=b(a,d),(n=d.length)>1)for(var g,h=e(c[0][0]),i=0;i<n;++i)if(h===e(d[i])){g=d[0],d[0]=d[i],d[i]=g;break}return d})}}function f(a,b){return"GeometryCollection"===b.type?{type:"FeatureCollection",features:b.geometries.map(function(b){return g(a,b)})}:g(a,b)}function g(a,b){var c={type:"Feature",id:b.id,properties:b.properties||{},geometry:h(a,b)};return null==b.id&&delete c.id,c}function h(a,b){function c(a,b){b.length&&b.pop();for(var c,d=k[0>a?~a:a],e=0,f=d.length;f>e;++e)b.push(c=d[e].slice()),j(c,e);0>a&&i(b,f)}function d(a){return a=a.slice(),j(a,0),a}function e(a){for(var b=[],d=0,e=a.length;e>d;++d)c(a[d],b);return b.length<2&&b.push(b[0].slice()),b}function f(a){for(var b=e(a);b.length<4;)b.push(b[0].slice());return b}function g(a){return a.map(f)}function h(a){var b=a.type;return"GeometryCollection"===b?{type:b,geometries:a.geometries.map(h)}:b in l?{type:b,coordinates:l[b](a)}:null}var j=r(a.transform),k=a.arcs,l={Point:function(a){return d(a.coordinates)},MultiPoint:function(a){return a.coordinates.map(d)},LineString:function(a){return e(a.arcs)},MultiLineString:function(a){return a.arcs.map(e)},Polygon:function(a){return g(a.arcs)},MultiPolygon:function(a){return a.arcs.map(g)}};return h(b)}function i(a,b){for(var c,d=a.length,e=d-b;e<--d;)c=a[e],a[e++]=a[d],a[d]=c}function j(a,b){for(var c=0,d=a.length;d>c;){var e=c+d>>>1;a[e]<b?c=e+1:d=e}return c}function k(a){function b(a,b){a.forEach(function(a){0>a&&(a=~a);var c=e[a];c?c.push(b):e[a]=[b]})}function c(a,c){a.forEach(function(a){b(a,c)})}function d(a,b){"GeometryCollection"===a.type?a.geometries.forEach(function(a){d(a,b)}):a.type in g&&g[a.type](a.arcs,b)}var e={},f=a.map(function(){return[]}),g={LineString:b,MultiLineString:c,Polygon:c,MultiPolygon:function(a,b){a.forEach(function(a){c(a,b)})}};a.forEach(d);for(var h in e)for(var i=e[h],k=i.length,l=0;k>l;++l)for(var m=l+1;k>m;++m){var n,o=i[l],p=i[m];(n=f[o])[h=j(n,p)]!==p&&n.splice(h,0,p),(n=f[p])[h=j(n,o)]!==o&&n.splice(h,0,o)}return f}function l(a,b){function c(a){f.remove(a),a[1][2]=b(a),f.push(a)}var d=r(a.transform),e=s(a.transform),f=q();return b||(b=o),a.arcs.forEach(function(a){for(var g,h,i=[],j=0,k=0,l=a.length;l>k;++k)h=a[k],d(a[k]=[h[0],h[1],1/0],k);for(var k=1,l=a.length-1;l>k;++k)g=a.slice(k-1,k+2),g[1][2]=b(g),i.push(g),f.push(g);for(var k=0,l=i.length;l>k;++k)g=i[k],g.previous=i[k-1],g.next=i[k+1];for(;g=f.pop();){var m=g.previous,n=g.next;g[1][2]<j?g[1][2]=j:j=g[1][2],m&&(m.next=n,m[2]=g[2],c(m)),n&&(n.previous=m,n[0]=g[0],c(n))}a.forEach(e)}),a}function m(a){for(var b,c=-1,d=a.length,e=a[d-1],f=0;++c<d;)b=e,e=a[c],f+=b[0]*e[1]-b[1]*e[0];return.5*f}function o(a){var b=a[0],c=a[1],d=a[2];return Math.abs((b[0]-d[0])*(c[1]-b[1])-(b[0]-c[0])*(d[1]-b[1]))}function p(a,b){return a[1][2]-b[1][2]}function q(){function a(a,b){for(;b>0;){var c=(b+1>>1)-1,e=d[c];if(p(a,e)>=0)break;d[e._=b]=e,d[a._=b=c]=a}}function b(a,b){for(;;){var c=b+1<<1,f=c-1,g=b,h=d[g];if(e>f&&p(d[f],h)<0&&(h=d[g=f]),e>c&&p(d[c],h)<0&&(h=d[g=c]),g===b)break;d[h._=b]=h,d[a._=b=g]=a}}var c={},d=[],e=0;return c.push=function(b){return a(d[b._=e]=b,e++),e},c.pop=function(){if(!(0>=e)){var a,c=d[0];return--e>0&&(a=d[e],b(d[a._=0]=a,0)),c}},c.remove=function(c){var f,g=c._;if(d[g]===c)return g!==--e&&(f=d[e],(p(f,c)<0?a:b)(d[f._=g]=f,g)),g},c}function r(a){if(!a)return t;var b,c,d=a.scale[0],e=a.scale[1],f=a.translate[0],g=a.translate[1];return function(a,h){h||(b=c=0),a[0]=(b+=a[0])*d+f,a[1]=(c+=a[1])*e+g}}function s(a){if(!a)return t;var b,c,d=a.scale[0],e=a.scale[1],f=a.translate[0],g=a.translate[1];return function(a,h){h||(b=c=0);var i=(a[0]-f)/d|0,j=(a[1]-g)/e|0;a[0]=i-b,a[1]=j-c,b=i,c=j}}function t(){}var u={version:"1.6.19",mesh:function(a){return h(a,d.apply(this,arguments))},meshArcs:d,merge:function(a){return h(a,e.apply(this,arguments))},mergeArcs:e,feature:f,neighbors:k,presimplify:l};"function"==typeof a&&a.amd?a(u):"object"==typeof c&&c.exports?c.exports=u:this.topojson=u}()},{}],2:[function(a,b){var c=a("./renderingInterface"),d=a("topojson");b.exports=L.TileLayer.Canvas.extend({options:{async:!0},initialize:function(a,b){L.TileLayer.Canvas.prototype.initialize.call(this,b),this._tileCache={},this._renderers=[],this.setUrl(a),this.on("tileunload",function(a){a.tile.abort&&a.tile.abort(),a.tile.abort=null})},projector:function(a,b,c){var d=Math.pow(2,a.z),e=40075016.68557849,f=e/d,g=a.x%d,h=a.y%d,i={top:e/2-(h+1)/d*e,left:-(e/2)+g/d*e};return i.bottom=i.top+f,i.right=i.left+f,d3.geo.transform({point:function(a,b){var d=L.CRS.EPSG3857.project({lat:b,lng:a});d.x=(d.x-i.left)/f,d.y=1-(d.y-i.top)/f,d.x*=c,d.y*=c,this.stream.point(d.x,d.y)}})},clippedProjector:function(a,b,c){var d=this.projector(a,b,c),e=d3.geo.clipExtent().extent([[-8,-8],[c+8,c+8]]);return{stream:function(a){return d.stream(e.stream(a))}}},_fetchTile:function(a,b){var c=this._url+"@@"+JSON.stringify(a);if("function"==typeof this._tileCache[c])return this._tileCache[c](b),function(){};var d=this,e=this.getTileUrl(a),f=[];return this._tileCache[c]=function(a){f.push(a)},this.fetch(e,function(a,e){a||(e=d.parse(e),f.forEach(function(a){a(null,e)}),d._tileCache[c]=function(a){a(null,e)}),b(a,e)})},render:function(a,b){if("function"==typeof b)return this._renderers.push({layer:a,run:b}),this;var d=new c(this,a);return this._renderers.push({layer:a,run:d.run.bind(d)}),d},drawData:function(a,b,c,d){var e=a.getContext("2d"),f=a.width;e.clearRect(0,0,f,f);var g={};if(this._renderers.length){var h=this;this._renderers.forEach(function(a){c[a.layer]&&("undefined"==typeof g[a.layer]&&(g[a.layer]=d3.geo.path().projection(h.clippedProjector(b,a.layer,f)).context(e)),a.run(e,c[a.layer].features,b,function(b){"object"!=typeof b||Array.isArray(b)||(b=[b]),e.beginPath(),b.forEach(g[a.layer])}))}),d()}else d(new Error("No renderer specified!"))},drawTile:function(a,b){if("undefined"==typeof this._url)return void this.tileDrawn(a);this._adjustTilePoint(b);var c,d=this;a.abort=this._fetchTile(b,function(e,f){if(e)throw d.tileDrawn(a),e;var g=document.createElement("canvas");d.drawData(g,a,b,f,function(){d.tileDrawn(a)},function(b){if(c&&window.cancelAnimationFrame(c),c=window.requestAnimationFrame(function(){a.width=g.width,a.height=g.height,a.getContext("2d").drawImage(g,0,0),d.tileDrawn(a)}),b)throw b})})}}),b.exports.json=b.exports.extend({fetch:function(a,b){var c=d3.json(a,function(a,c){b(a,c.response||c)});return c.abort.bind(c)}}),b.exports.geojson=b.exports.json.extend({parse:function(a){return{geojson:a}}}),b.exports.topojson=b.exports.json.extend({parse:function(a){var b={};for(var c in a.objects)b[c]=d.feature(a,a.objects[c]);return b}}),b.exports.mvt=b.exports.extend({fetch:function(a,b){var c=d3.xhr(a).responseType("arraybuffer").get(function(a,c){b(a,c.response||c)});return c.abort.bind(c)},parse:function(a){var b=new VectorTile(new pbf(new Uint8Array(a))),c={};"undefined"==typeof this.layerExtents&&(this.layerExtents={});for(var d in b.layers)this.layerExtents[d]=b.layers[d].extent,c[d]=b.layers[d].toGeoJSON();return c},projector:function(a,b,c){var d=this;return d3.geo.transform({point:function(a,e){a=a/d.layerExtents[b]*c,e=e/d.layerExtents[b]*c,this.stream.point(a,e)}})}})},{"./renderingInterface":3,topojson:1}],3:[function(a,b){var c=function(a,b){this.layer=a,this.layerName=b,this.instructions=[],this.whereConditions=[];var c=this;Object.keys(a.__proto__).forEach(function(b){c[b]=function(){return a[b].apply(a,arguments)}}),["render","data","mode","addTo"].forEach(function(b){c[b]=function(){return a[b].apply(a,arguments)}})};c.prototype.minZoom=function(a){return this.minZoom=a,this},c.prototype.maxZoom=function(a){return this.maxZoom=a,this},c.prototype.fill=function(a){return this.instructions.push({type:"fill",color:a}),this},c.prototype.stroke=function(a,b){return this.instructions.push({type:"stroke",width:a,color:b}),this},c.prototype.fillBy=function(a,b,c){return this.fill(function(d){return b[d.properties[a]]||c}),this},c.prototype.strokeBy=function(a,b,c){return this.stroke(function(d){return b[d.properties[a]]||c}),this},c.prototype._where=function(a){var b=a.field,c=a.value;if("undefined"==typeof c)if("string"==typeof b)this.where(function(a){return a.properties[b]?!0:!1},void 0,a.invert);else if("object"==typeof b)for(var d in b)this.where(d,b[d],a.invert);else{if("function"!=typeof b)throw new Error("with RenderingInterface.where(field, value) if value is undefined then field must be a string, object, or function!");if(a.invert){var e=b;b=function(){return!e.apply(null,arguments)}}this.whereConditions.push(b)}else if("string"==typeof c||"number"==typeof c)this.where(function(a){return a.properties[b]==c},void 0,a.invert);else{if("object"!=typeof c||!Array.isArray(c))throw new Error("RenderingInterface.where(field, value) cannot be called with field as type "+typeof b+" and value as type "+typeof c);this.where(function(a){return-1!=c.indexOf(a.properties[b])},void 0,a.invert)}return this},c.prototype.where=function(a,b,c){return this._where({field:a,value:b,invert:c})},c.prototype.whereNot=function(a,b){return this._where({field:a,value:b,invert:!0})},c.prototype.run=function(a,b,c,d){"number"==typeof this.minZoom&&c.z<this.minZoom||"number"==typeof this.maxZoom&&c.z>this.maxZoom||(this.whereConditions.forEach(function(a){b=b.filter(a)}),this.instructions.forEach(function(c){if("fill"==c.type)if("string"==typeof c.color)a.fillStyle=c.color,d(b),a.fill();else{if("function"!=typeof c.color)throw new Error("fill color must be string or function, is type "+typeof c.color);b.forEach(function(b){a.fillStyle=c.color(b),d(b),a.fill()})}else if("stroke"==c.type)if("number"==typeof c.width&&"string"==typeof c.color)a.lineWidth=c.width,a.strokeStyle=c.color,d(b),a.stroke();else{if("function"!=typeof c.width&&"function"!=typeof c.color)throw new Error("Expected stroke(number or function, string or function) or stroke(function), got stroke("+typeof c.width+", "+typeof c.color+")");b.forEach(function(b){var e="function"==typeof c.width?c.width(b):c.width,f="function"==typeof c.color?c.color(b):c.color;"undefined"==typeof c.color&&Array.isArray(e)&&(f=e[1],e=e[0]),d(b),a.stroke()})}}))},b.exports=c},{}]},{},[2])(2)});